1 is ok but it calculates the cost 2 times (one time for teststructure and another time for cost itself)

2 is meant to solve this problem but it's incomplete. I did it only where it generates the initial pop.